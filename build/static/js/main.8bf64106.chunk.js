(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{103:function(e,t,a){},159:function(e,t){},162:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},184:function(e,t,a){},186:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(36),o=a.n(c),l=(a(103),a(187)),s=a(22),u=a(11),i=a(8),m=a.n(i),p=a(13),d=a(6),v=a(89),E=a.n(v).a.create({baseURL:"https://backend-events.herokuapp.com/"}),f=a(188),b=a(189),g=a(190),h=a(90),j=a(200),O=Object(n.createContext)(),x=function(e){var t=Object(n.useState)(!!localStorage.getItem("user")),a=Object(d.a)(t,2),c={isLoggedIn:a[0],setIsLoggedIn:a[1]};return r.a.createElement(O.Provider,{value:c},e.children)};function k(e){var t=e.history,a=Object(n.useContext)(O).setIsLoggedIn,c=Object(n.useState)(""),o=Object(d.a)(c,2),s=o[0],u=o[1],i=Object(n.useState)(""),v=Object(d.a)(i,2),x=v[0],k=v[1],S=Object(n.useState)(!1),y=Object(d.a)(S,2),N=y[0],C=y[1],w=Object(n.useState)("false"),I=Object(d.a)(w,2),D=I[0],_=I[1],R=function(){var e=Object(p.a)(m.a.mark((function e(n){var r,c,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,E.post("/login",{email:s,password:x});case 3:r=e.sent,c=r.data.user_id||!1,o=r.data.user||!1;try{o&&c?(localStorage.setItem("user",o),localStorage.setItem("user_id",c),a(!0),t.push("/")):(l=r.data.message,C(!0),_(l),setTimeout((function(){C(!1),_("")}),2e3))}catch(N){C(!0),_("Erro na resposta do servidor")}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(l.a,null,r.a.createElement("h2",null,"Login:"),r.a.createElement("p",null,"Por favor fa\xe7a o ",r.a.createElement("strong",null,"login")," na sua conta"),r.a.createElement(f.a,{onSubmit:R},r.a.createElement("div",{className:"input-group"},r.a.createElement(b.a,{className:"form-group"}),r.a.createElement(b.a,{className:"mb-2 mr-sm-2 mb-sm-0"},r.a.createElement(g.a,{type:"email",name:"email",id:"exampleEmail",placeholder:"seu email",onChange:function(e){return u(e.target.value)}})),r.a.createElement(b.a,{className:"mb-2 mr-sm-2 mb-sm-0"},r.a.createElement(g.a,{type:"password",name:"password",id:"examplePassword",placeholder:"sua senha",onChange:function(e){return k(e.target.value)}}))),r.a.createElement(b.a,null,r.a.createElement(h.a,{className:"submit-btn"},"Logar")),r.a.createElement(b.a,null,r.a.createElement(h.a,{className:"secondary-btn",onClick:function(){return t.push("/register")}},"Cadastrar"))),N?r.a.createElement(j.a,{className:"event-validation",color:"danger"},D):"")}function S(e){var t=e.history,a=Object(n.useContext)(O).setIsLoggedIn,c=Object(n.useState)(""),o=Object(d.a)(c,2),s=o[0],u=o[1],i=Object(n.useState)(""),v=Object(d.a)(i,2),x=v[0],k=v[1],S=Object(n.useState)(""),y=Object(d.a)(S,2),N=y[0],C=y[1],w=Object(n.useState)(""),I=Object(d.a)(w,2),D=I[0],_=I[1],R=Object(n.useState)(!1),L=Object(d.a)(R,2),T=L[0],P=L[1],Y=Object(n.useState)(""),F=Object(d.a)(Y,2),M=(F[0],F[1]),A=function(){var e=Object(p.a)(m.a.mark((function e(n){var r,c,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""===s||""===x||""===N||""===D){e.next=10;break}return e.next=4,E.post("/user/register",{email:s,password:x,firstName:N,lastName:D});case 4:r=e.sent,c=r.data.user||!1,o=r.data.user_id||!1,c&&o?(localStorage.setItem("user",c),localStorage.setItem("user_id",o),a(!0),t.push("/")):(l=r.data.message,P(!0),M(l),setTimeout((function(){P(!1),M("")}),2e3)),e.next=13;break;case 10:P(!0),M("Precisa preencher todos os campos"),setTimeout((function(){P(!1),M("")}),2e3);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(l.a,null,r.a.createElement("h2",null,"Registro:"),r.a.createElement("p",null,"Por favor fa\xe7a o ",r.a.createElement("strong",null,"registro")," da sua nova conta"),r.a.createElement(f.a,{onSubmit:A},r.a.createElement("div",{className:"input-group"},r.a.createElement(b.a,{className:"mb-2 mr-sm-2 mb-sm-0"},r.a.createElement(g.a,{type:"text",name:"firstName",id:"firstName",placeholder:"Nome",onChange:function(e){return C(e.target.value)}})),r.a.createElement(b.a,{className:"mb-2 mr-sm-2 mb-sm-0"},r.a.createElement(g.a,{type:"text",name:"lastName",id:"lastName",placeholder:"Sobrenome",onChange:function(e){return _(e.target.value)}})),r.a.createElement(b.a,{className:"mb-2 mr-sm-2 mb-sm-0"},r.a.createElement(g.a,{type:"email",name:"email",id:"exampleEmail",placeholder:"seu email",onChange:function(e){return u(e.target.value)}})),r.a.createElement(b.a,{className:"mb-2 mr-sm-2 mb-sm-0"},r.a.createElement(g.a,{type:"password",name:"password",id:"examplePassword",placeholder:"sua senha",onChange:function(e){return k(e.target.value)}}))),r.a.createElement(b.a,null,r.a.createElement(h.a,{className:"submit-btn",color:"info"},"Cadastrar")),r.a.createElement(b.a,null,r.a.createElement(h.a,{className:"secondary-btn",onClick:function(){return t.push("/login")}},"Deseja logar?"))),T?r.a.createElement(j.a,{className:"event-validation",color:"danger"},"Est\xe1 faltando dados obrigat\xf3rios"):"")}var y=a(97),N=a(38),C=a.n(N),w=a(191),I=a(92),D=a(201),_=a(202),R=a(192),L=a(91),T=a.n(L);a(162);function P(e){var t=e.history,a=Object(n.useState)([]),c=Object(d.a)(a,2),o=c[0],l=c[1],s=localStorage.getItem("user"),u=localStorage.getItem("user_id"),i=Object(n.useState)(null),v=Object(d.a)(i,2),f=v[0],b=v[1],g=Object(n.useState)(!1),O=Object(d.a)(g,2),x=O[0],k=O[1],S=Object(n.useState)(!1),N=Object(d.a)(S,2),L=N[0],P=N[1],Y=Object(n.useState)(""),F=Object(d.a)(Y,2),M=F[0],A=F[1],U=Object(n.useState)([]),q=Object(d.a)(U,2),V=q[0],$=q[1],J=Object(n.useState)(!1),z=Object(d.a)(J,2),B=z[0],W=z[1],G=Object(n.useState)(""),H=Object(d.a)(G,2),K=H[0],Q=H[1],X=Object(n.useState)(!1),Z=Object(d.a)(X,2),ee=Z[0],te=Z[1];Object(n.useEffect)((function(){ce()}),[]);var ae=Object(n.useMemo)((function(){return T()("http://localhost:8000/",{query:{user:u}})}),[u]);Object(n.useEffect)((function(){ae.on("registration_request",(function(e){return $([].concat(Object(y.a)(V),[e]))}))}),[V,ae]);var ne=function(e){b(e),ce(e)},re=function(){var e=Object(p.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b("myevents"),e.next=4,E.get("/user/events",{headers:{user:s}});case 4:a=e.sent,l(a.data.events),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.push("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(p.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a?"/dashboard/".concat(a):"/dashboard",e.next=4,E.get(n,{headers:{user:s}});case 4:r=e.sent,l(r.data.events),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.push("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.delete("/event/".concat(t),{headers:{user:s}});case 3:P(!0),A("Evento deletado com sucesso!"),setTimeout((function(){P(!1),ne(null),A("")}),2500),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),k(!0),A("Erro ao excluir evento"),setTimeout((function(){k(!1),A("")}),2e3);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.post("/registration/".concat(t.id),{},{headers:{user:s}});case 3:P(!0),A("Inscrito no evento ".concat(t.title," com sucesso!")),setTimeout((function(){P(!1),ne(null),A("")}),2500),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),k(!0),A("Inscri\xe7\xe3o no evento ".concat(t.title," n\xe3o foi bem sucedida")),setTimeout((function(){k(!1),A("")}),2e3);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.post("/registration/".concat(t,"/approvals"),{},{headers:{user:s}});case 3:te(!0),Q("Inscri\xe7\xe3o no evento aprovada com sucesso!"),ie(t),setTimeout((function(){te(!1),Q("")}),2e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.post("/registration/".concat(t,"/rejections"),{},{headers:{user:s}});case 3:te(!0),Q("Pedido de inscri\xe7\xe3o no evento rejeitado com sucesso!"),ie(t),setTimeout((function(){te(!1),Q("")}),2500),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(e){var t=V.filter((function(t){return t._id!==e}));$(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"notifications"},V.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("div",null,r.a.createElement("strong",null,e.user.email)," est\xe1 pedindo para se registrar em seu evento",r.a.createElement("strong",null,e.event.title)),r.a.createElement(w.a,null,r.a.createElement(h.a,{color:"primary",onClick:function(){return se(e._id)}},"Aceitar"),r.a.createElement(h.a,{color:"danger",onClick:function(){return ue(e._id)}},"Declinar")))}))),ee?r.a.createElement(j.a,{color:"success"},K):"",r.a.createElement("div",{className:"filter-panel"},r.a.createElement(I.a,{isOpen:B,toggle:function(){return W(!B)}},r.a.createElement(D.a,{color:"primary",caret:!0},"filter"),r.a.createElement(_.a,null,r.a.createElement(R.a,{onClick:function(){return ne(null)},active:null===f},"Todos os Eventos"),r.a.createElement(R.a,{onClick:re,active:"myevents"===f},"Meus Eventos"),r.a.createElement(R.a,{onClick:function(){return ne("Esportes")},active:"Esportes"===f},"Esportes"),r.a.createElement(R.a,{onClick:function(){return ne("Social")},active:"Social"===f},"Social"),r.a.createElement(R.a,{onClick:function(){return ne("Religioso")},active:"Religioso"===f},"Religioso")))),r.a.createElement("ul",{className:"events-list"},o.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("header",{style:{backgroundImage:"url(".concat(e.thumbnail_url,")")}},e.user===u?r.a.createElement("div",null,r.a.createElement(h.a,{color:"danger",size:"sm",onClick:function(){return oe(e._id)}},"Delete")):""),r.a.createElement("strong",null,e.title),r.a.createElement("span",null,"Data: ",C()(e.date).format("DD/MM/YYYY")),r.a.createElement("span",null,"Valor R$: ",parseFloat(e.price).toFixed(2)),r.a.createElement("span",null,"Descri\xe7\xe3o: ",e.description),r.a.createElement(h.a,{color:"primary",onClick:function(){return le(e)}},"Se inscrever no evento"))}))),x?r.a.createElement(j.a,{className:"event-validation",color:"danger"},M):"",L?r.a.createElement(j.a,{className:"event-validation",color:"success"},M):"")}var Y=a(193),F=a(194),M=a(95),A=a.n(M);a(180);function U(e){var t=e.history,a=Object(n.useState)(""),c=Object(d.a)(a,2),o=c[0],s=c[1],u=Object(n.useState)(""),i=Object(d.a)(u,2),v=i[0],O=i[1],x=Object(n.useState)(""),k=Object(d.a)(x,2),S=k[0],y=k[1],N=Object(n.useState)(null),C=Object(d.a)(N,2),w=C[0],I=C[1],L=Object(n.useState)("Evento"),T=Object(d.a)(L,2),P=T[0],M=T[1],U=Object(n.useState)(""),q=Object(d.a)(U,2),V=q[0],$=q[1],J=Object(n.useState)(!1),z=Object(d.a)(J,2),B=z[0],W=z[1],G=Object(n.useState)(!1),H=Object(d.a)(G,2),K=H[0],Q=H[1],X=Object(n.useState)(!1),Z=Object(d.a)(X,2),ee=Z[0],te=Z[1],ae=localStorage.getItem("user");Object(n.useEffect)((function(){ae||t.push("/login")}),[]);var ne=Object(n.useMemo)((function(){return w?URL.createObjectURL(w):null}),[w]),re=function(){var e=Object(p.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),(n=new FormData).append("thumbnail",w),n.append("sport",P),n.append("title",o),n.append("price",S),n.append("description",v),n.append("date",V),e.prev=8,""===o||""===v||""===S||"Evento"===P||""===V||null===w){e.next=16;break}return e.next=12,E.post("/event",n,{headers:{user:ae}});case 12:Q(!0),setTimeout((function(){Q(!1),t.push("/")}),2e3),e.next=18;break;case 16:W(!0),setTimeout((function(){W(!1)}),2e3);case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),Promise.reject(e.t0),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[8,20]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){return M(e)};return r.a.createElement(l.a,null,r.a.createElement("h1",null,"Registre seu Evento"),r.a.createElement(f.a,{onSubmit:re},r.a.createElement("div",{className:"input-group"},r.a.createElement(b.a,null,r.a.createElement(Y.a,null,"Envie a Imagem"),r.a.createElement(Y.a,{id:"thumbnail",style:{backgroundImage:"url(".concat(ne,")")},className:w?"has-thumbnail":""},r.a.createElement(g.a,{id:"thumbnail",type:"file",onChange:function(e){return I(e.target.files[0])}}),r.a.createElement("img",{src:A.a,style:{maxWidth:"50px"},alt:"icone de enviar arquivo"}))),r.a.createElement(b.a,null,r.a.createElement(Y.a,null,"Nome do evento: "),r.a.createElement(g.a,{id:"title",type:"text",value:o,placeholder:"Nome do Evento",onChange:function(e){return s(e.target.value)}})),r.a.createElement(b.a,null,r.a.createElement(Y.a,null,"Descri\xe7\xe3o do evento: "),r.a.createElement(g.a,{id:"description",type:"text",value:v,placeholder:"Descri\xe7\xe3o do Evento",onChange:function(e){return O(e.target.value)}})),r.a.createElement(b.a,null,r.a.createElement(Y.a,null,"Valor do evento: "),r.a.createElement(g.a,{id:"price",type:"text",value:S,placeholder:"Valor R$:0.00",onChange:function(e){return y(e.target.value)}})),r.a.createElement(b.a,null,r.a.createElement(Y.a,null,"Data do evento: "),r.a.createElement(g.a,{id:"date",type:"date",value:V,placeholder:"00/00/0000",onChange:function(e){return $(e.target.value)}})),r.a.createElement(b.a,null,r.a.createElement(F.a,{isOpen:ee,toggle:function(){return te(!ee)}},r.a.createElement(h.a,{id:"caret",value:P,disabled:!0},P),r.a.createElement(D.a,{caret:!0}),r.a.createElement(_.a,null,r.a.createElement(R.a,{onClick:function(){return ce("Esportes")}},"Esportes"),r.a.createElement(R.a,{onClick:function(){return ce("Social")}},"Social"),r.a.createElement(R.a,{onClick:function(){return ce("Religioso")}},"Religioso"))))),r.a.createElement(b.a,null,r.a.createElement(h.a,{type:"submit",className:"submit-btn"},"Criar Evento")),r.a.createElement(b.a,null,r.a.createElement(h.a,{className:"secondary-btn",onClick:function(){return t.push("/")}},"Cancelar"))),B?r.a.createElement(j.a,{className:"event-validation",color:"danger"},"Est\xe1 faltando dados obrigat\xf3rios"):"",K?r.a.createElement(j.a,{className:"event-validation",color:"success"},"Evento criado com sucesso"):"")}a(181);function q(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],c=t[1],o=localStorage.getItem("user");Object(n.useEffect)((function(){l()}),[]);var l=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.get("/registration",{headers:{user:o}});case 3:t=e.sent,c(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(e){return!0===e?"Aprovado":"Declinado"},u=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.post("/registration/".concat(t,"/approvals"),{},{headers:{user:o}});case 3:l(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.post("/registration/".concat(t,"/rejections"),{},{headers:{user:o}});case 3:l(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("ul",{className:"events"},a.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("div",null,r.a.createElement("strong",null,e.eventTitle)),r.a.createElement("div",{className:"events-details"},r.a.createElement("span",null,"Event Date: ",C()(e.eventDate).format("dd/mm/YYYY")),r.a.createElement("span",null,"Event Price R$:",parseFloat(e.eventPrice).toFixed(2)),r.a.createElement("span",null,"User Email: ",e.userEmail),r.a.createElement("span",null,"Status:",r.a.createElement("span",{className:void 0!==e.approved?s(e.approved):"Pendente"},void 0!==e.approved?s(e.approved):"Pendente"))),r.a.createElement(w.a,null,r.a.createElement(h.a,{disabled:!0===e.approved||!1===e.approved,color:"primary",onClick:function(){return u(e._id)}},"Aceitar"),r.a.createElement(h.a,{disabled:!0===e.approved||!1===e.approved,color:"danger",onClick:function(){return i(e._id)}},"Declinar")))})))}var V=a(195),$=a(196),J=a(197),z=a(198),B=a(199),W=function(){var e=Object(n.useContext)(O),t=e.isLoggedIn,a=e.setIsLoggedIn,c=Object(n.useState)(!0),o=Object(d.a)(c,2),l=o[0],u=o[1];return t?r.a.createElement("div",null,r.a.createElement(V.a,{color:"faded",light:!0},r.a.createElement($.a,{onClick:function(){return u(!l)}}),r.a.createElement(s.b,{to:"/login",onClick:function(){localStorage.removeItem("user"),localStorage.removeItem("user_id"),a(!1)}},"Logout"),r.a.createElement(J.a,{isOpen:!l,navbar:!0},r.a.createElement(z.a,{navbar:!0},r.a.createElement(B.a,null,r.a.createElement(s.b,{to:"/events"},"Registro eventos")),r.a.createElement(B.a,null,r.a.createElement(s.b,{to:"/myregistrations"},"Meus registros")),r.a.createElement(B.a,null,r.a.createElement(s.b,{to:"/"},"Lista Eventos")))))):""};function G(){return r.a.createElement(s.a,null,r.a.createElement(W,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0,component:P}),r.a.createElement(u.a,{path:"/myregistrations",exact:!0,component:q}),r.a.createElement(u.a,{path:"/login",exact:!0,component:k}),r.a.createElement(u.a,{path:"/register",exact:!0,component:S}),r.a.createElement(u.a,{path:"/events",component:U})))}a(184);var H=function(){return r.a.createElement(x,null,r.a.createElement(l.a,null,r.a.createElement("h1",null,"Eventos App"),r.a.createElement("div",{className:"content"},r.a.createElement(G,null))))};a(185);o.a.render(r.a.createElement(H,null),document.getElementById("root"))},95:function(e,t,a){e.exports=a.p+"static/media/camera.91a960a0.png"},98:function(e,t,a){e.exports=a(186)}},[[98,1,2]]]);
//# sourceMappingURL=main.8bf64106.chunk.js.map